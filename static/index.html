<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JBG transkribering</title>
    <link rel="icon" href="/static/favicon/favicon.ico" type="image/x-icon">
    <script src="/static/javascript/script.js" defer></script>  <!-- External JavaScript -->
    <link rel="stylesheet" href="/static/styles/styles.css">  <!-- External CSS -->
</head>
<body>
    <div id="wrapper">

        <h1>JBG transkribering</h1>
        <h3><em>Obs! Endast .mp3-filer</em></h3>
        <header style="margin-top: 1rem; font-size: 0.85rem; text-align: left; color: #555;">
            <p id="userDisplay" style="font-style: italic;"></p>
        </header>
        
        <!-- File selector -->
        <input type="file" id="audioFile" accept=".mp3,audio/mpeg">
        <label>
            <input type="checkbox" id="enableEncryption" checked>
            Använd kryptering (rekommenderas)
        </label><br><br> 

        <!-- Display checkboxes for OpenAI API call options -->
        <fieldset style="margin-top: 1rem;" id="ai-options">
            <legend><h4>Lägg till AI-baserad analys</h4></legend>
            <label for="apiKey">OpenAI API-nyckel:</label><br>
            <input type="password" id="apiKey" placeholder="sk-..." style="width: 100%; max-width: 400px;"><br><br>
            <label for="modelSelect">Välj modell:</label><br>
            <select id="modelSelect" style="width: 100%; max-width: 400px;">
                <option value="gpt-5">gpt-5 - Nyaste flaggskeppsmodellen, dyrare</option>
                <option value="gpt-5-mini">gpt-5-mini - Medeldyr variant av gpt-5</option>
                <option value="gpt-4o" selected>gpt-4o - Snabb & billig GPT-4-modell</option>
                <option value="gpt-4">gpt-4 – Högsta noggrannhet, långsammare, dyrare</option>
                <option value="gpt-4-turbo">gpt-4-turbo – Snabbare, billigare, mycket hög kvalitet</option>
                <option value="gpt-3.5-turbo">gpt-3.5-turbo – Snabbast och billigast, men mindre exakt</option>
                <!--option value="gpt-4.5-preview">gpt-4.5-preview – Experimentell förlaga</option-->
            </select><br><br>
            <label><input type="checkbox" id="optSummary"> Generera sammanfattning</label>
            <div id="summaryOptions" style="margin-left: 1rem; display: none;">
                <label><input type="radio" name="summaryStyle" value="short" checked> Enkel</label>
                <label><input type="radio" name="summaryStyle" value="extensive"> Utförlig</label>
            </div><br>
            <label><input type="checkbox" id="optSuspicious"> Markera misstänkta fel i transkriberingen</label><br>
            <label><input type="checkbox" id="optQuestions"> Föreslå följdfrågor baserat på innehållet</label><br>
            <label><input type="checkbox" id="optSpeakers"> Identifiera olika talare baserat på innehåll (beta)</label>
        </fieldset>
        
        <!-- Display button for uploading file -->
        <button id="button" onclick="uploadFile()">Ladda upp</button>
        
        <!-- Display upload status -->
        <p id="status"></p>

        <!-- A spinner that spins while transcribing -->
        <div id="spinner-container">
            <div class="spinner"></div>
        </div>
        
        <!-- Display transcription text -->
        <!-- Scrollable textarea for transcription output -->
        <textarea id="result" readonly></textarea>

        <!-- Download Transcription -->
        <a id="downloadLink" href="#" download>Ladda ner transkriberingen</a>

    </div> <!-- Wrapper -->

</body>
</html>
